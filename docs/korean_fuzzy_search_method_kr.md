# 한국어 기반 퍼지 검색을 활용한 악기 장식음 검색 방법론

## 1. 개요
본 연구는 한국어 텍스트 검색의 특성을 반영한 클라이언트 측 퍼지 검색 엔진을 제안한다. 제안된 방법은 (i) 유니코드 기반 정규화, (ii) 한글 음절의 초성(Choseong) 인덱싱, (iii) 편집거리(Levenshtein)와 부분 윈도우 기반 유사도(partial ratio)의 결합, (iv) 필드 가중치와 동적 임계값을 포함하는 순위화 전략을 통합하였다. 이를 통해 브라우저 환경에서 가벼우면서도 한국어 특유의 검색 행태(초성 검색, 자모 불완전 입력, 오타 허용)를 보완할 수 있다.

## 2. 배경 및 필요성
기존 레벤슈타인 유사도는 문자 단위의 삽입·삭제·치환에 대해 언어 불문 허용성을 제공한다. 그러나 한글은 (a) 사용자가 초성만으로 검색하는 경우가 빈번하고, (b) 입력기(IME) 미완성 상태에서 자모 단위가 노출되며, (c) 평음과 겹자음, 모음 혼동(예: ㅐ/ㅔ) 등이 자주 발생한다. 따라서 단순 문자 기반 유사도만으로는 한국어 검색의 요구를 충족하기 어렵다. 이에 따라 본 연구에서는 기존 편집거리 계산을 보완하는 한국어 특화 전처리와 매칭 방식을 제안한다.

## 3. 방법론
### 3.1. 유니코드 정규화
모든 텍스트에 대해 NFKD 정규화를 수행하여 음절을 자모 단위로 분해한 뒤, 결합 부호와 불필요한 기호를 제거하였다. 이 과정을 통해 공백, 전각·반각 문자, 악센트 등 비본질적 요소를 최소화하였다.

### 3.2. 초성 인덱싱
한글 음절(U+AC00–U+D7A3)은 유니코드 계산식을 이용해 초성 인덱스를 산출한다. 각 음절은 `CHO` 테이블에 대응되는 초성 문자로 변환되며, 독립적으로 입력된 초성(ㄱ–ㅎ)은 그대로 보존된다. 이를 통해 질의가 초성만으로 구성된 경우에도 유효한 검색 결과를 제공할 수 있다. 예: “ㅂㅅㅈ” → “박상준”.

### 3.3. 유사도 산출
주어진 질의 \( q \)와 텍스트 \( t \)에 대해 다음의 유사도를 계산한다.  
1) **부분 포함 신호**: 정규화된 텍스트가 질의 문자열을 포함할 경우 1.0 부여.  
2) **레벤슈타인 유사도**: \( 1 - d(q, t) / \max(|q|, |t|) \).  
3) **Partial Ratio**: \(|q|\) 길이의 윈도우를 \( t \)에 슬라이딩하며 최대 유사도 산출. 긴 설명 필드와 짧은 질의의 불균형 문제를 완화한다.  
4) **초성 유사도**: 질의가 초성으로만 구성된 경우, 위의 계산을 초성 시퀀스 \( C(q), C(t) \)에 대해 반복한다.  

최종 필드 점수는 \( \max(s_{\mathrm{sub}}, s_{\mathrm{lev}}, s_{\mathrm{par}}) \)로 산출한다.

### 3.4. 순위화 및 임계값
각 필드의 정보 기여도를 반영하여 가중치를 부여하였다. 이름(1.0), 악기명(0.85), 카테고리(0.7), 설명(0.45) 순으로 중요도를 설정하였다. 전체 아이템의 점수는 필드별 점수에 가중치를 적용한 후 최대값을 취한다. 질의 길이에 따라 동적 임계값을 적용하였다: 길이 ≤2 → 0.9, 3–4 → 0.7, 그 외 → 0.6. 이를 통해 짧은 질의에서 발생하는 과도한 결과 반환을 방지하였다.

### 3.5. 효율성 확보
중복 연산을 줄이기 위해 LRU 캐시(200개)를 적용하여 부분비교 결과를 저장하였다. 또한 정확한 부분일치가 발견될 경우 즉시 최고 점수를 부여하여 조기 종료한다. 데이터셋이 대규모일 경우, 본 알고리즘은 웹 워커(Web Worker)로 이관하여 브라우저 UI 차단을 최소화할 수 있다.

## 4. 평가 설계
제안된 방법은 다음 세 가지 축으로 평가할 수 있다.  
1) **한국어 특화 검색 성능**: 초성 질의, 미완성 자모 입력, 발음 유사 혼동 케이스에서의 Recall@k 및 nDCG@k.  
2) **노이즈 강건성**: 삽입·삭제·치환·전치 오타가 포함된 질의에서 baseline 대비 성공률 비교.  
3) **지연시간 성능**: 데이터 크기(100, 1,000, 10,000)에 따른 p50/p95 응답 시간 측정. 캐시 적용 여부에 따른 성능도 비교한다.

## 5. 한계 및 확장 가능성
현재 레벤슈타인 비용은 균일하게 설정되어 있으나, ㄲ↔ㄱ, ㅐ↔ㅔ와 같은 한국어 특화 혼동쌍에 대해 가중 비용을 적용하면 개선 여지가 있다. 또한 자모 단위 토큰화 및 음운 기반 정규화 기법을 병행할 경우, 불완전 입력이나 발음 기반 검색에 대한 강건성이 향상될 수 있다. 대규모 데이터셋에서는 n-그램 역색인과 결합한 하이브리드 구조가 권장된다.